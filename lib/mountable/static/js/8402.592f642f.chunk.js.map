{"version":3,"file":"static/js/8402.592f642f.chunk.js","mappings":"6MAmFA,MA/CA,SAAwBA,GACtB,IAAQC,EAAmDD,EAAnDC,SAAUC,EAAyCF,EAAzCE,QAASC,EAAgCH,EAAhCG,UAAWC,EAAqBJ,EAArBI,MAAOC,EAAcL,EAAdK,UACvCC,EAAQ,CAAEF,MAAAA,GAEVG,GAAeC,EAAAA,EAAAA,MAqBrB,OACE,gBAAKC,UAAU,8BAA8BH,MAAOA,EAAM,UACxD,SAACI,EAAA,GAAa,CAACC,KAAMT,EAAQS,KAAK,UAChC,SAAC,KAAQ,CACPC,KAAMC,EAAAA,GAAAA,UACNC,KAAMC,EAAAA,GAAAA,MACNd,SAAUA,EACVe,QA1BgC,WAKtC,GAFAb,EAAUc,gBAAgBf,EAAS,CAAEgB,QAAQ,IAEzChB,EAAQiB,IAAIC,WAAW,WACzBC,EAAAA,EAAAA,IAAuBd,EAAcL,EAAQiB,SAD/C,CAKA,IAAMG,EAAOC,SAASC,cAAc,KAC9BC,EAAG,UAAMpB,EAAUqB,cACvBxB,EAAQiB,KACT,kBAAUQ,mBAAmBJ,SAASK,QACvCN,EAAKO,aAAa,OAAQJ,GAC1BH,EAAKO,aAAa,SAAU,UAC5BP,EAAKQ,OARL,CASF,EAUQC,WAAY7B,EAAQ8B,oBAAqB,EAAM,UAE/C,SAACC,EAAA,EAAiB,CAChBC,OAAQhC,EAAQiC,MAChBC,WAAW,EACXC,SAAO,EACPC,UAAQ,SAMpB,C","sources":["../../../streamlit/frontend/src/components/widgets/DownloadButton/DownloadButton.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\nimport { DownloadButton as DownloadButtonProto } from \"src/autogen/proto\"\nimport UIButton, {\n  ButtonTooltip,\n  Kind,\n  Size,\n} from \"src/components/shared/Button\"\nimport { WidgetStateManager } from \"src/lib/WidgetStateManager\"\nimport StreamlitMarkdown from \"src/components/shared/StreamlitMarkdown\"\nimport { StreamlitEndpoints } from \"src/lib/StreamlitEndpoints\"\nimport { useStliteKernel, downloadFileFromStlite } from \"@stlite/kernel\"\n\nexport interface Props {\n  endpoints: StreamlitEndpoints\n  disabled: boolean\n  element: DownloadButtonProto\n  widgetMgr: WidgetStateManager\n  width: number\n}\n\nfunction DownloadButton(props: Props): ReactElement {\n  const { disabled, element, widgetMgr, width, endpoints } = props\n  const style = { width }\n\n  const stliteKernel = useStliteKernel()\n\n  const handleDownloadClick: () => void = () => {\n    // Downloads are only done on links, so create a hidden one and click it\n    // for the user.\n    widgetMgr.setTriggerValue(element, { fromUi: true })\n\n    if (element.url.startsWith(\"/media\")) {\n      downloadFileFromStlite(stliteKernel, element.url)\n      return\n    }\n\n    const link = document.createElement(\"a\")\n    const uri = `${endpoints.buildMediaURL(\n      element.url\n    )}?title=${encodeURIComponent(document.title)}`\n    link.setAttribute(\"href\", uri)\n    link.setAttribute(\"target\", \"_blank\")\n    link.click()\n  }\n\n  return (\n    <div className=\"row-widget stDownloadButton\" style={style}>\n      <ButtonTooltip help={element.help}>\n        <UIButton\n          kind={Kind.SECONDARY}\n          size={Size.SMALL}\n          disabled={disabled}\n          onClick={handleDownloadClick}\n          fluidWidth={element.useContainerWidth || false}\n        >\n          <StreamlitMarkdown\n            source={element.label}\n            allowHTML={false}\n            isLabel\n            isButton\n          />\n        </UIButton>\n      </ButtonTooltip>\n    </div>\n  )\n}\n\nexport default DownloadButton\n"],"names":["props","disabled","element","widgetMgr","width","endpoints","style","stliteKernel","useStliteKernel","className","Button","help","kind","Kind","size","Size","onClick","setTriggerValue","fromUi","url","startsWith","downloadFileFromStlite","link","document","createElement","uri","buildMediaURL","encodeURIComponent","title","setAttribute","click","fluidWidth","useContainerWidth","StreamlitMarkdown","source","label","allowHTML","isLabel","isButton"],"sourceRoot":""}